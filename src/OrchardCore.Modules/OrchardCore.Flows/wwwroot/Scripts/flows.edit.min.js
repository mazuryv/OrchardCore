function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach((function(e){_defineProperty(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var widgetDragItem,lastContainer,widgetItemSourceId,widgetItemDestId;$((function(){$(document).on("click",".add-widget",(function(t){var e=$(this).data("widget-type"),r=$(this).data("target-id"),n=$(this).data("html-field-prefix"),a=$("#"+r).data("buildeditorurl"),i=$(this).data("prefixes-name"),o=$(this).data("flowmetadata"),d=$(this).data("parent-content-type"),s=$(this).data("part-name"),l=$("#"+r).closest("form").find("input[name*='Prefixes']").filter((function(t,e){return $(e).val().substring(0,$(e).val().lastIndexOf("-"))===n})).map((function(t,e){return parseInt($(e).val().substring($(e).val().lastIndexOf("-")+1))||0})),c=l.length?Math.max.apply(Math,_toConsumableArray(l))+1:0,p=n+"-"+c.toString(),u=$(this).data("contenttypes-name"),f=$(this).data("contentitems-name");$.ajax({url:a+"?id="+e+"&prefix="+p+"&prefixesName="+i+"&contentTypesName="+u+"&contentItemsName="+f+"&targetId="+r+"&flowmetadata="+o+"&parentContentType="+d+"&partName="+s}).done((function(t){var e=JSON.parse(t);$(document.getElementById(r)).append(e.Content),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")}))}))})),$(document).on("click",".insert-widget",(function(t){var e=$(this).data("widget-type"),r=$(this).closest(".widget-template"),n=$(this).data("target-id"),a=$(this).data("html-field-prefix"),i=$("#"+n).data("buildeditorurl"),o=$(this).data("flowmetadata"),d=$(this).data("prefixes-name"),s=$(this).data("parent-content-type"),l=$(this).data("part-name"),c=$("#"+n).closest("form").find("input[name*='Prefixes']").filter((function(t,e){return $(e).val().substring(0,$(e).val().lastIndexOf("-"))===a})).map((function(t,e){return parseInt($(e).val().substring($(e).val().lastIndexOf("-")+1))||0})),p=c.length?Math.max.apply(Math,_toConsumableArray(c))+1:0,u=a+"-"+p.toString(),f=$(this).data("contenttypes-name"),m=$(this).data("contentitems-name");$.ajax({url:i+"?id="+e+"&prefix="+u+"&prefixesName="+d+"&contentTypesName="+f+"&contentItemsName="+m+"&targetId="+n+"&flowmetadata="+o+"&parentContentType="+s+"&partName="+l}).done((function(t){var e=JSON.parse(t);$(e.Content).insertBefore(r),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")}))}))})),$(document).on("click",".widget-delete",(function(){var t=$(this);confirmDialog(_objectSpread(_objectSpread({},t.data()),{},{callback:function(e){e&&(t.closest(".widget-template").remove(),$(document).trigger("contentpreview:render"))}}))})),$(document).on("change",".widget-editor-footer label, .widget-editor-header label",(function(){var t=$(this).closest(".widget-template"),e=$(this).find("input:first-child");if("undefined"!==e[0].id&&e[0].id.indexOf("Size")>0){var r=$(this).find("input:first-child").val(),n=t.attr("class").split(" ");$.each(n,(function(e,r){0===r.indexOf("col-md-")&&t.removeClass(r)}));var a=Math.round(r/100*12);t.addClass("col-md-"+a),$(this).closest(".dropdown-menu").prev("button").text(r+"%")}else if("undefined"!==e[0].id&&e[0].id.indexOf("Alignment")>0){var i=$(this).find("svg")[0].outerHTML;$(this).closest(".dropdown-menu").prev("button").html(i)}$(this).parent().find(".dropdown-item").removeClass("active"),$(this).toggleClass("active"),$(document).trigger("contentpreview:render")})),$(document).on("click",".widget-editor-btn-toggle",(function(){$(this).closest(".widget-editor").toggleClass("collapsed")})),$(document).on("keyup",".widget-editor-body .form-group input.content-caption-text",(function(){var t=$(this).closest(".widget-editor").find(".widget-editor-header:first .widget-editor-header-text"),e=t.data("content-type-display-text"),r=$(this).val()+" "+e;t.text(r)}))}));
